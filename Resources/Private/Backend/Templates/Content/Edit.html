<f:form action="update" controller="Content" id="form-create-relation" object="{content}" method="post">

	<!-- additional parameters -->
	<f:form.hidden name="matches[uid]" value="{content.uid}"/>
	<f:form.hidden name="dataType" value="{dataType}"/>

	<!-- @todo display records in two flex columns? -->
	<div class="control-group create-one">

		<label class="control-label">
			<v:sprite name="{v:tca.table(key: \"typeicon_classes|default\", dataType: \"{relatedDataType}\")}"/>
			{relatedContentTitle}
		</label>

		<div class="controls">
			<f:form.checkbox name="content[{fieldName}][]" value="" style="display: none"/>
			<ul class="relation-list">
				<f:for each="{relatedContents}" as="relatedContent">
					<li>
						<label>
							<f:form.checkbox name="content[{fieldName}][]" value="{relatedContent.uid}" checked="{v:isRelatedTo(relatedContent: '{relatedContent}')}"/>
							<v:tca.title content="{relatedContent}"/>
						</label>
					</li>
				</f:for>
			</ul>
		</div>
	</div>

	<!-- HIDDEN SUBMIT BUTTON -->
	<input type="submit" style="visibility: hidden; height: 1px">
</f:form>
{namespace v=TYPO3\CMS\Vidi\ViewHelpers}